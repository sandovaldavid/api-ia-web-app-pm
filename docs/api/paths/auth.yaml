# Rutas de autenticación

register:
    post:
        tags:
            - Autenticación
        summary: Registrar nuevo usuario
        description: Crea una nueva cuenta de usuario en el sistema
        operationId: registerUser
        requestBody:
            required: true
            content:
                application/json:
                    schema:
                        $ref: '../components/schemas.yaml#/RegisterData'
        responses:
            201:
                description: Usuario registrado exitosamente
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                success:
                                    type: boolean
                                    example: true
                                token:
                                    type: string
                                    example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
                                user:
                                    type: object
                                    properties:
                                        id:
                                            type: string
                                            example: '61234567890abcdef1234567'
                                        name:
                                            type: string
                                            example: 'Juan Pérez'
                                        email:
                                            type: string
                                            example: 'juan@example.com'
                                        role:
                                            type: string
                                            example: 'user'
            400:
                $ref: '../components/responses.yaml#/BadRequestError'
            500:
                $ref: '../components/responses.yaml#/ServerError'
        security: []

login:
    post:
        tags:
            - Autenticación
        summary: Iniciar sesión
        description: Autentica un usuario y devuelve un token JWT para futuras solicitudes
        operationId: loginUser
        requestBody:
            required: true
            content:
                application/json:
                    schema:
                        $ref: '../components/schemas.yaml#/LoginCredentials'
        responses:
            200:
                description: Inicio de sesión exitoso
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                success:
                                    type: boolean
                                    example: true
                                token:
                                    type: string
                                    example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
                                user:
                                    type: object
                                    properties:
                                        id:
                                            type: string
                                            example: '61234567890abcdef1234567'
                                        name:
                                            type: string
                                            example: 'Juan Pérez'
                                        email:
                                            type: string
                                            example: 'juan@example.com'
                                        role:
                                            type: string
                                            example: 'user'
            400:
                $ref: '../components/responses.yaml#/BadRequestError'
            401:
                $ref: '../components/responses.yaml#/UnauthorizedError'
            500:
                $ref: '../components/responses.yaml#/ServerError'
        security: []

me:
    get:
        tags:
            - Usuarios
        summary: Obtener usuario actual
        description: Obtiene información del usuario autenticado actualmente
        operationId: getCurrentUser
        responses:
            200:
                description: Información del usuario obtenida exitosamente
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                success:
                                    type: boolean
                                    example: true
                                data:
                                    $ref: '../components/schemas.yaml#/User'
            401:
                $ref: '../components/responses.yaml#/UnauthorizedError'
            500:
                $ref: '../components/responses.yaml#/ServerError'
